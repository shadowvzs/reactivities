(this.webpackJsonpreactivities=this.webpackJsonpreactivities||[]).push([[0],{391:function(e,t,a){e.exports=a(682)},681:function(e,t,a){},682:function(e,t,a){"use strict";a.r(t),a.d(t,"history",(function(){return Ta}));var n=a(0),r=a.n(n),i=a(31),o=a.n(i),c=a(88),l=a(52),u=a(347),s=a.n(u),m=a(690),d=a(18),b=a(381),p=a(705),f=a(382),h=a(145),g=a(28),v=a(50),E=a(8),y=a(22),j=a.n(y),O=a(32),w=a(380),C=a(16),S=a(115),x=a(10),k=(a(128),a(66)),P=a.n(k),A=a(35);P.a.defaults.baseURL="/api",P.a.interceptors.request.use((function(e){var t=window.localStorage.getItem("jwt");return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),P.a.interceptors.response.use(void 0,(function(e){"Network Error"!==e.message||e.response||A.b.error("Network error - make sure API is running!");var t=e.response,a=t.status,n=t.data,r=t.config,i=t.headers;throw 404===a?Ta.push("/notfound"):401===a&&'Bearer error="invalid_token", error_description="The token is expired"'===i["www-authenticate"]?(window.localStorage.removeItem("jwt"),Ta.push("/"),A.b.info("Your session has expired, please login again")):400===a&&"get"===r.method&&n.errors.id?Ta.push("/notfound"):500===a&&A.b.error("Server error - check the terminal for more info!"),e.response}));var z,I,R,M,D,L,F,T,H,N,G,U,B,q,V,J,W,Y,_,K,Q,X,Z,$,ee,te,ae,ne,re,ie,oe,ce,le,ue,se,me,de,be,pe,fe,he,ge,ve,Ee,ye,je,Oe,we,Ce,Se,xe,ke,Pe,Ae,ze,Ie,Re,Me,De,Le,Fe=function(e){return e.data},Te=function(e){return P.a.get(e).then(Fe)},He=function(e,t){return P.a.post(e,t).then(Fe)},Ne=function(e,t){return P.a.put(e,t).then(Fe)},Ge=function(e){return P.a.delete(e).then(Fe)},Ue=function(e,t){var a=new FormData;return a.append("File",t),P.a.post(e,a,{headers:{"Content-type":"multipart/form-data"}}).then(Fe)},Be=function(e,t){return P.a.get(e,{params:t}).then(Fe)},qe={list:function(e){return Be("/activities",e)},details:function(e){return Te("/activities/".concat(e))},create:function(e){return He("/activities",e)},update:function(e){return Ne("/activities/".concat(e.id),e)},delete:function(e){return Ge("/activities/".concat(e))},attend:function(e){return He("/activities/".concat(e,"/attend"),{})},unattend:function(e){return Ge("/activities/".concat(e,"/attend"))}},Ve={current:function(){return Te("/user")},login:function(e){return He("/user/login",e)},register:function(e){return He("/user/register",e)}},Je={get:function(e){return Te("/profiles/".concat(e))},uploadPhoto:function(e){return Ue("/photos",e)},setMainPhoto:function(e){return He("/photos/".concat(e,"/setMain"),{})},deletePhoto:function(e){return Ge("/photos/".concat(e))},updateProfile:function(e){return Ne("/profiles",e)},follow:function(e){return He("/profiles/".concat(e,"/follow"),{})},unfollow:function(e){return Ge("/profiles/".concat(e,"/follow"))},listFollowings:function(e,t){return Te("/profiles/".concat(e,"/follow?predicate=").concat(t))},listActivities:function(e,t){return Te("/profiles/".concat(e,"/activities?predicate=").concat(t))}},We=a(348),Ye=function(e,t){var a=e.toISOString().split("T")[0],n=t.toISOString().split("T")[1];return new Date(a+"T"+n)},_e=function(e,t){return e.date=new Date(e.date),e.isHost=e.attendees.some((function(e){return t&&e.isHost&&e.username===t.username})),e.isGoing=e.attendees.some((function(e){return t&&e.username===t.username})),e},Ke=function(e){return{displayName:e.displayName,isHost:!1,username:e.username,image:e.image}},Qe=a(239),Xe=(z=E.f.ref,I=function(){function e(t){var a=this;Object(v.a)(this,e),this.rootStore=void 0,Object(C.a)(this,"activityRegistry",R,this),Object(C.a)(this,"loadingInitial",M,this),Object(C.a)(this,"submitting",D,this),Object(C.a)(this,"loading",L,this),Object(C.a)(this,"activity",F,this),Object(C.a)(this,"target",T,this),Object(C.a)(this,"hubConnection",H,this),Object(C.a)(this,"activityCount",N,this),Object(C.a)(this,"page",G,this),Object(C.a)(this,"predicate",U,this),Object(C.a)(this,"setPredicate",B,this),Object(C.a)(this,"setPage",q,this),Object(C.a)(this,"createHubConnection",V,this),Object(C.a)(this,"stopHubConnection",J,this),Object(C.a)(this,"addComment",W,this),Object(C.a)(this,"loadActivities",Y,this),Object(C.a)(this,"loadActivity",_,this),this.getActivity=function(e){return a.activityRegistry.get(e)},Object(C.a)(this,"clearActivity",K,this),Object(C.a)(this,"setSubmitting",Q,this),Object(C.a)(this,"onCreateOrEdit",X,this),Object(C.a)(this,"onDelete",Z,this),Object(C.a)(this,"attendActivity",$,this),Object(C.a)(this,"cancelAttendance",ee,this),this.rootStore=t,Object(E.g)((function(){return a.predicate.keys()}),(function(){a.page=0,a.activityRegistry.clear(),a.loadActivities()}))}return Object(S.a)(e,[{key:"groupActivitiesByDate",value:function(e){var t=e.sort((function(e,t){return+e.date-+t.date}));return Object.entries(t.reduce((function(e,t){var a=t.date.toISOString().split("T")[0];return e[a]=e[a]?[].concat(Object(w.a)(e[a]),[t]):[t],e}),{}))}},{key:"axiosParams",get:function(){var e=new URLSearchParams;return e.append("limit",String(2)),e.append("offset","".concat(this.page?2*this.page:0)),this.predicate.forEach((function(t,a){"startDate"===a?e.append(a,t.toISOString()):e.append(a,t)})),e}},{key:"totalPages",get:function(){return Math.ceil(this.activityCount/2)}},{key:"activitiesByDate",get:function(){return this.groupActivitiesByDate(Array.from(this.activityRegistry.values()))}}]),e}(),R=Object(x.a)(I.prototype,"activityRegistry",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),M=Object(x.a)(I.prototype,"loadingInitial",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D=Object(x.a)(I.prototype,"submitting",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),L=Object(x.a)(I.prototype,"loading",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),F=Object(x.a)(I.prototype,"activity",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T=Object(x.a)(I.prototype,"target",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H=Object(x.a)(I.prototype,"hubConnection",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=Object(x.a)(I.prototype,"activityCount",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),G=Object(x.a)(I.prototype,"page",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),U=Object(x.a)(I.prototype,"predicate",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),B=Object(x.a)(I.prototype,"setPredicate",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,a){e.predicate.clear(),"all"!==t&&e.predicate.set(t,a)}}}),Object(x.a)(I.prototype,"axiosParams",[E.c],Object.getOwnPropertyDescriptor(I.prototype,"axiosParams"),I.prototype),Object(x.a)(I.prototype,"totalPages",[E.c],Object.getOwnPropertyDescriptor(I.prototype,"totalPages"),I.prototype),q=Object(x.a)(I.prototype,"setPage",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.page=t}}}),V=Object(x.a)(I.prototype,"createHubConnection",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.hubConnection=(new Qe.a).withUrl("/chat",{accessTokenFactory:function(){return e.rootStore.commonStore.token}}).configureLogging(Qe.b.Information).build(),e.hubConnection.start().then((function(){console.log("Attempting to join group"),e.hubConnection.invoke("AddToGroup",t)})).then((function(){return console.log(e.hubConnection.state)})).catch((function(e){return console.error("Error establishing connection:",e)})),e.hubConnection.on("ReceiveComment",(function(t){Object(E.h)((function(){e.activity.comments.push(t)}))})),e.hubConnection.on("Send",(function(e){A.b.info(e)}))}}}),J=Object(x.a)(I.prototype,"stopHubConnection",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.hubConnection.invoke("RemoveFromGroup",e.activity.id).then((function(){e.hubConnection.stop()})).then((function(){console.log("Connection stopped")})).catch((function(e){console.log("Error",e)}))}}}),W=Object(x.a)(I.prototype,"addComment",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.activityId=e.activity.id,t.prev=1,t.next=4,e.hubConnection.invoke("SendComment",a);case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}()}}),Object(x.a)(I.prototype,"activitiesByDate",[E.c],Object.getOwnPropertyDescriptor(I.prototype,"activitiesByDate"),I.prototype),Y=Object(x.a)(I.prototype,"loadActivities",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark((function t(){var a,n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingInitial=!0,t.prev=1,t.next=4,qe.list(e.axiosParams);case 4:a=t.sent,n=a.activities,r=a.activityCount,Object(E.h)("loading activities",(function(){var t=e.rootStore.userStore.user;n.forEach((function(a){_e(a,t),e.activityCount=r,e.activityRegistry.set(a.id,a)}))})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0);case 13:Object(E.h)("turn off loading spiner",(function(){e.loadingInitial=!1}));case 14:case"end":return t.stop()}}),t,null,[[1,10]])})))}}),_=Object(x.a)(I.prototype,"loadActivity",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.getActivity(a))){t.next=5;break}e.activity=n,t.next=17;break;case 5:return e.loadingInitial=!0,t.prev=6,t.next=9,qe.details(a);case 9:n=t.sent,Object(E.h)("load a single activity",(function(){_e(n,e.rootStore.userStore.user),e.activity=n,e.activityRegistry.set(n.id,n),e.loadingInitial=!1})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(6),Object(E.h)("disable loader for activity load",(function(){return e.loadingInitial=!1})),console.log(t.t0);case 17:return t.abrupt("return",n);case 18:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}()}}),K=Object(x.a)(I.prototype,"clearActivity",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.activity=void 0}}}),Q=Object(x.a)(I.prototype,"setSubmitting",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.submitting=t}}}),X=Object(x.a)(I.prototype,"onCreateOrEdit",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n,r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setSubmitting(!0),!a.id){t.next=19;break}if(t.prev=2,n=e.activityRegistry.get(a.id)){t.next=6;break}return t.abrupt("return");case 6:return Object.assign(n,a),t.next=9,qe.update(n);case 9:Object(E.h)("update activity",(function(){e.activityRegistry.set(n.id,n),e.activity=n})),t.next=17;break;case 12:return t.prev=12,t.t0=t.catch(2),e.setSubmitting(!1),A.b.error("Problem submitting data!"),t.abrupt("return",console.error(t.t0.response));case 17:t.next=36;break;case 19:return t.prev=19,a.id=Object(We.v4)(),t.next=23,qe.create(a);case 23:(r=Ke(e.rootStore.userStore.user)).isHost=!0,a.attendees=[r],a.comments=[],a.isHost=!0,Object(E.h)("create activity",(function(){e.activityRegistry.set(a.id,a),e.activity=a})),t.next=36;break;case 31:return t.prev=31,t.t1=t.catch(19),e.setSubmitting(!1),A.b.error("Problem submitting data!"),t.abrupt("return",console.error(t.t1.response));case 36:e.setSubmitting(!1),Ta.push("/activities/".concat(a.id));case 38:case"end":return t.stop()}}),t,null,[[2,12],[19,31]])})));return function(e){return t.apply(this,arguments)}}()}}),Z=Object(x.a)(I.prototype,"onDelete",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a,n){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.target=a.currentTarget.name,t.prev=1,t.next=4,qe.delete(n);case 4:Object(E.h)("delete activity",(function(){e.activityRegistry.delete(n)})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,a){return t.apply(this,arguments)}}()}}),$=Object(x.a)(I.prototype,"attendActivity",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Ke(e.rootStore.userStore.user),e.loading=!0,t.prev=2,t.next=5,qe.attend(e.activity.id);case 5:Object(E.h)((function(){e.activity.attendees.push(a),e.activity.isGoing=!0,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(2),Object(E.h)((function(){return e.loading=!1})),A.b.error("Problem signing up to activity");case 12:case"end":return t.stop()}}),t,null,[[2,8]])})))}}),ee=Object(x.a)(I.prototype,"cancelAttendance",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,qe.unattend(e.activity.id);case 4:Object(E.h)((function(){var t=e.rootStore.userStore.user;e.activity.attendees=e.activity.attendees.filter((function(e){return e.username!==t.username})),e.activity.isGoing=!1,e.activityRegistry.set(e.activity.id,e.activity),e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),Object(E.h)((function(){return e.loading=!1})),A.b.error("Problem at cancel activity");case 11:case"end":return t.stop()}}),t,null,[[1,7]])})))}}),I),Ze=(te=function(){function e(t){Object(v.a)(this,e),this.rootStore=void 0,Object(C.a)(this,"user",ae,this),Object(C.a)(this,"login",ne,this),Object(C.a)(this,"register",re,this),Object(C.a)(this,"getUser",ie,this),Object(C.a)(this,"logout",oe,this),this.rootStore=t}return Object(S.a)(e,[{key:"isLoggedIn",get:function(){return!!this.user}}]),e}(),ae=Object(x.a)(te.prototype,"user",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(x.a)(te.prototype,"isLoggedIn",[E.c],Object.getOwnPropertyDescriptor(te.prototype,"isLoggedIn"),te.prototype),ne=Object(x.a)(te.prototype,"login",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ve.login(a);case 3:n=t.sent,Object(E.h)((function(){e.user=n})),e.rootStore.commonStore.setToken(n.token),e.rootStore.modalStore.closeModal(),Ta.push("/activities"),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),re=Object(x.a)(te.prototype,"register",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ve.register(a);case 3:n=t.sent,Object(E.h)((function(){e.user=n})),e.rootStore.commonStore.setToken(n.token),e.rootStore.modalStore.closeModal(),Ta.push("/activities"),t.next=13;break;case 10:throw t.prev=10,t.t0=t.catch(0),t.t0;case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()}}),ie=Object(x.a)(te.prototype,"getUser",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return Object(O.a)(j.a.mark((function t(){var a;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ve.current();case 3:a=t.sent,Object(E.h)((function(){e.user=a})),t.next=10;break;case 7:throw t.prev=7,t.t0=t.catch(0),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))}}),oe=Object(x.a)(te.prototype,"logout",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.rootStore.commonStore.setToken(null),e.user=null,Ta.push("/")}}}),te),$e=(ce=function e(t){var a=this;Object(v.a)(this,e),this.rootStore=void 0,Object(C.a)(this,"token",le,this),Object(C.a)(this,"appLoaded",ue,this),Object(C.a)(this,"setToken",se,this),Object(C.a)(this,"setAppLoaded",me,this),this.rootStore=t,Object(E.g)((function(){return a.token}),(function(e){e?window.localStorage.setItem("jwt",e):window.localStorage.removeItem("jwt")}))},le=Object(x.a)(ce.prototype,"token",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return window.localStorage.getItem("jwt")}}),ue=Object(x.a)(ce.prototype,"appLoaded",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),se=Object(x.a)(ce.prototype,"setToken",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){window.localStorage.setItem("jwt",t),e.token=t}}}),me=Object(x.a)(ce.prototype,"setAppLoaded",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.appLoaded=!0}}}),ce),et=(de=E.f.shallow,be=function e(t){Object(v.a)(this,e),this.rootStore=void 0,Object(C.a)(this,"modal",pe,this),Object(C.a)(this,"openModal",fe,this),Object(C.a)(this,"closeModal",he,this),this.rootStore=t},pe=Object(x.a)(be.prototype,"modal",[de],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{open:!1,body:null}}}),fe=Object(x.a)(be.prototype,"openModal",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.modal.open=!0,e.modal.body=t}}}),he=Object(x.a)(be.prototype,"closeModal",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.modal.open=!1,e.modal.body=null}}}),be),tt=a(116),at=(ge=function(){function e(t){var a=this;Object(v.a)(this,e),this.rootStore=void 0,Object(C.a)(this,"profile",ve,this),Object(C.a)(this,"loadingProfile",Ee,this),Object(C.a)(this,"uploadingPhoto",ye,this),Object(C.a)(this,"loading",je,this),Object(C.a)(this,"followings",Oe,this),Object(C.a)(this,"activeTab",we,this),Object(C.a)(this,"userActivities",Ce,this),Object(C.a)(this,"loadingActivities",Se,this),Object(C.a)(this,"loadUserActivities",xe,this),Object(C.a)(this,"setActiveTab",ke,this),Object(C.a)(this,"loadProfile",Pe,this),Object(C.a)(this,"uploadPhoto",Ae,this),Object(C.a)(this,"setMainPhoto",ze,this),Object(C.a)(this,"deletePhoto",Ie,this),Object(C.a)(this,"updateProfile",Re,this),Object(C.a)(this,"unfollow",Me,this),Object(C.a)(this,"follow",De,this),Object(C.a)(this,"loadFollowings",Le,this),this.rootStore=t,Object(E.g)((function(){return a.activeTab}),(function(e){if(3===e||4===e){var t=4===e?"following":"followers";a.loadFollowings(t)}else a.followings=[]}))}return Object(S.a)(e,[{key:"isCurrentUser",get:function(){var e=this.rootStore.userStore.user;return this.profile&&e&&this.profile.username===e.username}}]),e}(),ve=Object(x.a)(ge.prototype,"profile",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ee=Object(x.a)(ge.prototype,"loadingProfile",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ye=Object(x.a)(ge.prototype,"uploadingPhoto",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),je=Object(x.a)(ge.prototype,"loading",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Oe=Object(x.a)(ge.prototype,"followings",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),we=Object(x.a)(ge.prototype,"activeTab",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ce=Object(x.a)(ge.prototype,"userActivities",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Se=Object(x.a)(ge.prototype,"loadingActivities",[E.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Object(x.a)(ge.prototype,"isCurrentUser",[E.c],Object.getOwnPropertyDescriptor(ge.prototype,"isCurrentUser"),ge.prototype),xe=Object(x.a)(ge.prototype,"loadUserActivities",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingActivities=!0,t.prev=1,t.next=4,Je.listActivities(a,n);case 4:r=t.sent,Object(E.h)((function(){e.userActivities=r,e.loadingActivities=!1})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),A.b.error("Problem loading activities"),console.error(t.t0),Object(E.h)((function(){return e.loadingActivities=!1}));case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a){return t.apply(this,arguments)}}()}}),ke=Object(x.a)(ge.prototype,"setActiveTab",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.activeTab=t}}}),Pe=Object(x.a)(ge.prototype,"loadProfile",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loadingProfile=!0,t.prev=1,t.next=4,Je.get(a);case 4:n=t.sent,Object(E.h)((function(){e.profile=n,e.loadingProfile=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0),Object(E.h)((function(){return e.loadingProfile=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),Ae=Object(x.a)(ge.prototype,"uploadPhoto",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.uploadingPhoto=!0,t.prev=1,t.next=4,Je.uploadPhoto(a);case 4:n=t.sent,Object(E.h)((function(){if(e.profile){var t=e.rootStore.userStore.user;e.profile.photos.push(n),n.isMain&&t&&(t.image=n.url,e.profile.image=n.url)}e.uploadingPhoto=!1})),t.next=13;break;case 8:t.prev=8,t.t0=t.catch(1),console.error(t.t0),A.b.error("Problem uploading photo"),Object(E.h)((function(){return e.uploadingPhoto=!1}));case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),ze=Object(x.a)(ge.prototype,"setMainPhoto",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.setMainPhoto(a.id);case 4:Object(E.h)((function(){e.rootStore.userStore.user.image=a.url,e.profile.photos.find((function(e){return e.isMain})).isMain=!1,e.profile.photos.find((function(e){return e.id===a.id})).isMain=!0,e.profile.image=a.url,e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0),A.b.error("Problem changing main photo"),Object(E.h)((function(){return e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Ie=Object(x.a)(ge.prototype,"deletePhoto",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.deletePhoto(a.id);case 4:Object(E.h)((function(){e.profile.photos=e.profile.photos.filter((function(e){return e.id!==a.id})),e.loading=!1})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0),A.b.error("Problem changing main photo"),Object(E.h)((function(){return e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Re=Object(x.a)(ge.prototype,"updateProfile",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.updateProfile(a);case 4:Object(E.h)((function(){a.displayName!==e.rootStore.userStore.user.displayName&&(e.rootStore.userStore.user.displayName=a.displayName),e.profile=Object(tt.a)({},e.profile,{},a)})),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),console.error(t.t0),A.b.error("Problem changing main photo"),Object(E.h)((function(){return e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Me=Object(x.a)(ge.prototype,"unfollow",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.unfollow(a);case 4:Object(E.h)((function(){e.profile.following=!1,e.profile.followersCount--,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),A.b.error("Problem unfollowing user"),Object(E.h)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),De=Object(x.a)(ge.prototype,"follow",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.follow(a);case 4:Object(E.h)((function(){e.profile.following=!0,e.profile.followersCount++,e.loading=!1})),t.next=11;break;case 7:t.prev=7,t.t0=t.catch(1),A.b.error("Problem following user"),Object(E.h)((function(){e.loading=!1}));case 11:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}}),Le=Object(x.a)(ge.prototype,"loadFollowings",[E.b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=Object(O.a)(j.a.mark((function t(a){var n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,Je.listFollowings(e.profile.username,a);case 4:n=t.sent,Object(E.h)((function(){e.followings=n,e.loading=!1})),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),A.b.error("Problem loading following user profiles"),Object(E.h)((function(){e.loading=!1}));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()}}),ge);Object(E.d)({enforceActions:!0});var nt=Object(n.createContext)(new function e(){Object(v.a)(this,e),this.activityStore=void 0,this.userStore=void 0,this.commonStore=void 0,this.modalStore=void 0,this.profileStore=void 0,this.activityStore=new Xe(this),this.userStore=new Ze(this),this.commonStore=new $e(this),this.modalStore=new et(this),this.profileStore=new at(this)}),rt=[{label:"Activities",path:"/activities"}],it=Object(d.a)((function(){var e=Object(n.useContext)(nt).userStore,t=e.user,a=e.logout;return r.a.createElement(b.a,{fixed:"top",inverted:!0},r.a.createElement(m.a,null,r.a.createElement(b.a.Item,{header:!0,as:g.b,exact:!0,to:"/"},r.a.createElement("img",{src:"/assets/logo.png",alt:"logo",style:{marginRight:10}}),"Reactivities"),rt.map((function(e){return r.a.createElement(b.a.Item,{key:e.label,as:g.b,to:e.path,children:e.label})})),r.a.createElement(b.a.Item,null,r.a.createElement(p.a,{positive:!0,content:"Create Activity",as:g.b,to:"/createActivity"})),t&&r.a.createElement(b.a.Item,{position:"right"},r.a.createElement(f.a,{avatar:!0,spaced:"right",src:t.image||"/assets/user.png"}),r.a.createElement(h.a,{pointing:"top left",text:t.displayName},r.a.createElement(h.a.Menu,null,r.a.createElement(h.a.Item,{as:g.a,to:"/profile/".concat(t.username),text:"My profile",icon:"user"}),r.a.createElement(h.a.Item,{onClick:a,text:"Logout",icon:"power"}))))))})),ot=a(45),ct=a(383),lt=a(691),ut=a(363),st=a.n(ut),mt=a(192),dt=a(699),bt=a(240),pt=a(89),ft=a(694),ht=a(700),gt=a(697),vt={borderColor:"orange",borderWidth:2},Et=Object(d.a)((function(e){var t=e.attendees;return r.a.createElement(ht.a,{horizontal:!0},t.map((function(e){return r.a.createElement(ht.a.Item,{key:e.username},r.a.createElement(gt.a,{header:e.displayName,trigger:r.a.createElement(f.a,{size:"mini",circular:!0,src:e.image||"/assets/user.png",bordered:!0,style:e.following?vt:void 0})}))})))})),yt=Object(d.a)((function(e){var t=e.activity,a=t.attendees.find((function(e){return e.isHost}));return r.a.createElement(bt.a.Group,null,r.a.createElement(bt.a,null,r.a.createElement(dt.a.Group,null,r.a.createElement(dt.a,null,r.a.createElement(dt.a.Image,{size:"tiny",circular:!0,src:a.image||"/assets/user.png",style:{marginBottom:3}}),r.a.createElement(dt.a.Content,null,r.a.createElement(dt.a.Header,{as:g.a,to:"/activities/".concat(t.id)}," ",t.title),r.a.createElement(dt.a.Description,null,"Hosted by ",r.a.createElement(g.a,{to:"/profile/".concat(a.username)}," ",a.displayName," ")),t.isHost&&r.a.createElement(dt.a.Description,null,r.a.createElement(mt.a,{basic:!0,color:"orange",content:"You are hosting this activity"})),t.isGoing&&r.a.createElement(dt.a.Description,null,r.a.createElement(mt.a,{basic:!0,color:"green",content:"You are going to this activity"})))))),r.a.createElement(bt.a,null,r.a.createElement(pt.a,{name:"clock"})," ",Object(ft.a)(t.date,"h:mm a"),r.a.createElement(pt.a,{name:"marker"})," ",t.venue,", ",t.city),r.a.createElement(bt.a,{secondary:!0},r.a.createElement(Et,{attendees:t.attendees})),r.a.createElement(bt.a,{clearing:!0},r.a.createElement("span",null,t.description),r.a.createElement(p.a,{floated:"right",content:"View",color:"blue",as:g.a,to:"/activities/".concat(t.id)})))})),jt=Object(d.a)((function(){var e=Object(n.useContext)(nt).activityStore.activitiesByDate;return r.a.createElement(r.a.Fragment,null,e.map((function(e){var t=Object(ot.a)(e,2),a=t[0],n=t[1];return r.a.createElement(r.a.Fragment,{key:a},r.a.createElement(mt.a,{size:"large",color:"blue"},Object(ft.a)(a,"eeee do MMMM")),r.a.createElement(dt.a.Group,{divided:!0},n.map((function(e){return r.a.createElement(yt,{key:e.id,activity:e})}))))})))})),Ot=a(709),wt=a(190),Ct=Object(d.a)((function(){var e=Object(n.useContext)(nt).activityStore,t=e.predicate,a=e.setPredicate;return r.a.createElement(r.a.Fragment,null,r.a.createElement(b.a,{vertical:!0,size:"large",style:{width:"100%",marginTop:50}},r.a.createElement(Ot.a,{icon:"filter",attached:!0,color:"teal",content:"Filters"}),r.a.createElement(b.a.Item,{active:0===t.size,color:"blue",name:"all",content:"All Activities",onClick:function(){return a("all","true")}}),r.a.createElement(b.a.Item,{active:t.has("isGoing"),color:"blue",name:"username",content:"I'm Going",onClick:function(){return a("isGoing","true")}}),r.a.createElement(b.a.Item,{active:t.has("isHost"),color:"blue",name:"host",content:"I'm hosting",onClick:function(){return a("isHost","true")}})),r.a.createElement(Ot.a,{icon:"calendar",attached:!0,color:"teal",content:"Select Date"}),r.a.createElement(wt.Calendar,{onChange:function(e){return a("startDate",e)},value:t.get("startDate")||new Date}))})),St=a(703),xt=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(St.a,{fluid:!0,style:{marginTop:50}},r.a.createElement(bt.a.Group,null,r.a.createElement(bt.a,{style:{minHeight:110}},r.a.createElement(St.a,null,r.a.createElement(St.a.Header,{image:!0},r.a.createElement(St.a.Line,null),r.a.createElement(St.a.Line,null)),r.a.createElement(St.a.Paragraph,null,r.a.createElement(St.a.Line,null)))),r.a.createElement(bt.a,null,r.a.createElement(St.a,null,r.a.createElement(St.a.Line,null),r.a.createElement(St.a.Line,null))),r.a.createElement(bt.a,{secondary:!0,style:{minHeight:70}}),r.a.createElement(bt.a,{clearing:!0},r.a.createElement(p.a,{disabled:!0,color:"blue",floated:"right",content:"View"})))))},kt=Object(d.a)((function(){var e=Object(n.useContext)(nt).activityStore,t=e.loadingInitial,a=e.loadActivities,i=e.setPage,o=e.page,c=e.totalPages,l=Object(n.useState)(!1),u=Object(ot.a)(l,2),s=u[0],m=u[1];return Object(n.useEffect)((function(){a()}),[a]),r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:10},t&&0===o?r.a.createElement(xt,null):r.a.createElement(st.a,{pageStart:0,loadMore:function(){m(!0),i(o+1),a().then((function(){return m(!1)}))},hasMore:!s&&o+1!==c,initialLoad:!1},r.a.createElement(jt,null))),r.a.createElement(ct.a.Column,{width:6},r.a.createElement(Ct,null)),r.a.createElement(ct.a.Column,{width:6},r.a.createElement(lt.a,{active:s})))})),Pt=a(122),At=function e(t){Object(v.a)(this,e),this.id=void 0,this.title="",this.description="",this.category="",this.date=void 0,this.time=void 0,this.city="",this.venue="",t&&t.date&&(t.time=t.date),Object.assign(this,t)},zt=a(695),It=a(29),Rt=[{key:"drinks",text:"Drinks",value:"drinks"},{key:"culture",text:"Culture",value:"culture"},{key:"film",text:"Film",value:"film"},{key:"food",text:"Food",value:"food"},{key:"music",text:"Music",value:"music"},{key:"travel",text:"Travel",value:"travel"}],Mt=function(e){var t=e.input,a=e.width,n=e.type,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(zt.a.Field,{error:c&&!!l,type:n,width:a},r.a.createElement("input",Object.assign({},t,{placeholder:i})),c&&l&&r.a.createElement(mt.a,{basic:!0,color:"red"},l))},Dt=function(e){var t=e.input,a=e.width,n=e.rows,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(zt.a.Field,{error:c&&!!l,width:a},r.a.createElement("textarea",Object.assign({},t,{placeholder:i,rows:n})),c&&l&&r.a.createElement(mt.a,{basic:!0,color:"red"},l))},Lt=a(692),Ft=function(e){var t=e.input,a=e.width,n=e.options,i=e.placeholder,o=e.meta,c=o.touched,l=o.error;return r.a.createElement(zt.a.Field,{error:c&&!!l,width:a},r.a.createElement(Lt.a,{value:t.value,onChange:function(e,a){return t.onChange(a.value)},options:n,placeholder:i}),c&&l&&r.a.createElement(mt.a,{basic:!0,color:"red"},l))},Tt=function(e){e.id;var t=e.input,a=e.date,n=void 0!==a&&a,i=e.time,o=void 0!==i&&i,c=e.width,l=e.placeholder,u=e.meta,s=u.touched,m=u.error,d=Object(Pt.a)(e,["id","input","date","time","width","placeholder","meta"]);return r.a.createElement(zt.a.Field,{error:s&&!!m,width:c},r.a.createElement(wt.DateTimePicker,Object.assign({date:n,time:o,placeholder:l,value:t.value||null,onKeyDown:function(e){return e.preventDefault()},onBlur:t.onBlur,onChange:t.onChange},d)),s&&m&&r.a.createElement(mt.a,{basic:!0,color:"red"},m))},Ht=a(30),Nt=Object(Ht.combineValidators)({title:Object(Ht.isRequired)({message:"The event title is required"}),category:Object(Ht.isRequired)("Category"),description:Object(Ht.composeValidators)(Object(Ht.isRequired)("Description"),Object(Ht.hasLengthGreaterThan)(4)({message:"Description needs to be at least 5 character"}))(),city:Object(Ht.isRequired)("City"),venue:Object(Ht.isRequired)("Venue"),date:Object(Ht.isRequired)("Date"),time:Object(Ht.isRequired)("Time")}),Gt=Object(d.a)((function(e){var t=e.match,a=e.history,i=Object(n.useContext)(nt).activityStore,o=i.submitting,c=i.loadActivity,l=i.onCreateOrEdit,u=Object(n.useState)(new At),s=Object(ot.a)(u,2),m=s[0],d=s[1],b=Object(n.useState)(!1),f=Object(ot.a)(b,2),h=f[0],g=f[1];Object(n.useEffect)((function(){t.params.id&&!m.id&&(g(!0),c(t.params.id).then((function(e){d(new At(e))})).finally((function(){g(!1)})))}),[t.params.id,c,m.id]);return r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:10},r.a.createElement(bt.a,{clearing:!0},r.a.createElement(It.b,{validate:Nt,initialValues:m,onSubmit:function(e){var t=e.date,a=e.time,n=Object(Pt.a)(e,["date","time"]),r=Object(tt.a)({},n,{date:Ye(t,a)});l(r)},render:function(e){var t=e.handleSubmit,n=e.invalid,i=e.pristine;return r.a.createElement(zt.a,{onSubmit:t,loading:h},r.a.createElement(It.a,{name:"title",placeholder:"Title",value:m.title,component:Mt}),r.a.createElement(It.a,{name:"description",rows:3,placeholder:"Description",value:m.description,component:Dt}),r.a.createElement(It.a,{name:"category",options:Rt,placeholder:"Category",value:m.category,component:Ft}),r.a.createElement(zt.a.Group,{widths:"equal"},r.a.createElement(It.a,{date:!0,name:"date",placeholder:"Date",value:m.date,component:Tt}),r.a.createElement(It.a,{time:!0,name:"time",placeholder:"Time",value:m.date,component:Tt})),r.a.createElement(It.a,{name:"city",placeholder:"City",value:m.city,component:Mt}),r.a.createElement(It.a,{name:"venue",placeholder:"Venue",value:m.venue,component:Mt}),r.a.createElement(p.a,{disabled:h||n||i,floated:"right",positive:!0,type:"submit",content:"Submit",loading:o}),r.a.createElement(p.a,{disabled:h,floated:"right",type:"button",content:"Cancel",onClick:function(){return a.push(m.id?"/activities/".concat(m.id):"/activities")},loading:o}))}}))))})),Ut=a(707),Bt=function(e){var t=e.inverted,a=void 0===t||t,n=e.content;return r.a.createElement(Ut.a,{active:!0,inverted:a},r.a.createElement(lt.a,{content:n}))},qt={filter:"brightness(30%)"},Vt={position:"absolute",bottom:"5%",left:"5%",width:"100%",height:"auto",color:"white"},Jt=Object(d.a)((function(e){var t=e.activity,a=t.attendees.find((function(e){return e.isHost})),i=Object(n.useContext)(nt).activityStore,o=i.attendActivity,c=i.cancelAttendance,l=i.loading;return r.a.createElement(bt.a.Group,null,r.a.createElement(bt.a,{basic:!0,attached:"top",style:{padding:"0"}},r.a.createElement(f.a,{src:"/assets/categoryImages/".concat(t.category,".jpg"),fluid:!0,style:qt}),r.a.createElement(bt.a,{basic:!0,style:Vt},r.a.createElement(dt.a.Group,null,r.a.createElement(dt.a,null,r.a.createElement(dt.a.Content,null,r.a.createElement(Ot.a,{size:"huge",content:t.title,style:{color:"white"}}),r.a.createElement("p",null,Object(ft.a)(t.date,"eeee do MMMM")),r.a.createElement("p",null,"Hosted by",r.a.createElement(g.a,{to:"/profile/".concat(a.username)},r.a.createElement("strong",null," ",a.displayName," ")))))))),r.a.createElement(bt.a,{clearing:!0,attached:"bottom"},t.isHost?r.a.createElement(p.a,{as:g.a,to:"/manage/".concat(t.id),color:"orange",floated:"right"},"Manage Event"):t.isGoing?r.a.createElement(p.a,{loading:l,onClick:c},"Cancel attendance"):r.a.createElement(p.a,{loading:l,color:"teal",onClick:o},"Join Activity")))})),Wt=Object(d.a)((function(e){var t=e.activity;return r.a.createElement(bt.a.Group,null,r.a.createElement(bt.a,{attached:"top"},r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:1},r.a.createElement(pt.a,{size:"large",color:"teal",name:"info"})),r.a.createElement(ct.a.Column,{width:15},r.a.createElement("p",null,t.description)))),r.a.createElement(bt.a,{attached:!0},r.a.createElement(ct.a,{verticalAlign:"middle"},r.a.createElement(ct.a.Column,{width:1},r.a.createElement(pt.a,{name:"calendar",size:"large",color:"teal"})),r.a.createElement(ct.a.Column,{width:15},r.a.createElement("span",null,Object(ft.a)(t.date,"eeee do MMMM")," at ",Object(ft.a)(t.date,"h:mm a"))))),r.a.createElement(bt.a,{attached:!0},r.a.createElement(ct.a,{verticalAlign:"middle"},r.a.createElement(ct.a.Column,{width:1},r.a.createElement(pt.a,{name:"marker",size:"large",color:"teal"})),r.a.createElement(ct.a.Column,{width:11},r.a.createElement("span",null,t.venue,", ",t.city)))))})),Yt=a(698),_t=a(701),Kt=Object(d.a)((function(){var e=Object(n.useContext)(nt).activityStore,t=e.createHubConnection,a=e.stopHubConnection,i=e.addComment,o=e.activity;Object(n.useEffect)((function(){return t(o.id),function(){return a()}}),[t,a,o]);var c=o&&o.comments||[];return r.a.createElement(n.Fragment,null,r.a.createElement(bt.a,{textAlign:"center",attached:"top",inverted:!0,color:"teal",style:{border:"none"}},r.a.createElement(Ot.a,null,"Chat about this event")),r.a.createElement(bt.a,{attached:!0},r.a.createElement(Yt.a.Group,null,c.map((function(e){return r.a.createElement(Yt.a,{key:e.id},r.a.createElement(Yt.a.Avatar,{src:e.image||"/assets/user.png"}),r.a.createElement(Yt.a.Content,null,r.a.createElement(Yt.a.Author,{as:g.a,to:"/profile/".concat(e.username)},e.displayName),r.a.createElement(Yt.a.Metadata,null,r.a.createElement("div",null,Object(_t.a)(new Date(e.createdAt),new Date))),r.a.createElement(Yt.a.Text,null,e.body)))})),r.a.createElement(It.b,{onSubmit:i,render:function(e){var t=e.handleSubmit,a=e.submitting,n=e.form;return r.a.createElement(zt.a,{onSubmit:function(){return t().then((function(){return n.reset()}))}},r.a.createElement(It.a,{name:"body",component:Dt,rows:2,placeholder:"Add your comment"}),r.a.createElement(p.a,{content:"Add Reply",labelPosition:"left",icon:"edit",primary:!0,loading:a}))}}))))})),Qt=Object(d.a)((function(e){var t=e.attendees;return r.a.createElement(n.Fragment,null,r.a.createElement(bt.a,{textAlign:"center",style:{border:"none"},attached:"top",secondary:!0,inverted:!0,color:"teal"},t.length," ",1===t.length?"Person":"People"," Going"),r.a.createElement(bt.a,{attached:!0},r.a.createElement(ht.a,{relaxed:!0,divided:!0},t.map((function(e){return r.a.createElement(dt.a,{key:e.username,style:{position:"relative"}},e.isHost&&r.a.createElement(mt.a,{style:{position:"absolute"},color:"orange",ribbon:"right"},"Host"),r.a.createElement(f.a,{size:"tiny",src:e.image||"/assets/user.png"}),r.a.createElement(dt.a.Content,{verticalAlign:"middle"},r.a.createElement(dt.a.Header,{as:"h3"},r.a.createElement(g.a,{to:"/profile/".concat(e.username)},e.displayName)),e.following&&r.a.createElement(dt.a.Extra,{style:{color:"orange"}},"Following")))})))))})),Xt=Object(d.a)((function(e){var t=e.match,a=Object(n.useContext)(nt).activityStore,i=a.activity,o=a.loadActivity,c=a.loadingInitial;return Object(n.useEffect)((function(){o(t.params.id)}),[o,t.params.id]),c?r.a.createElement(Bt,{content:"Loading activity"}):i?r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:10},r.a.createElement(Jt,{activity:i}),r.a.createElement(Wt,{activity:i}),r.a.createElement(Kt,null)),r.a.createElement(ct.a.Column,{width:6},r.a.createElement(Qt,{attendees:i.attendees}))):r.a.createElement("h2",null,"Activity not found")})),Zt=a(117),$t=a(72),ea=a(704),ta=function(e){var t=e.error,a=e.text,n=t.data&&Object.values(t.data.errors);return r.a.createElement(ea.a,{negative:!0},r.a.createElement(ea.a.Header,null,t.statusText),!!n.length&&r.a.createElement(ea.a.List,null,n.flat().map((function(e,t){return r.a.createElement(ea.a.Item,{key:t},e)}))),a&&r.a.createElement(ea.a.Content,{content:a}))},aa=Object(Ht.combineValidators)({email:Object(Ht.isRequired)("email"),password:Object(Ht.isRequired)("password")}),na=Object(d.a)((function(){var e=Object(n.useContext)(nt).userStore.login;return r.a.createElement(It.b,{validate:aa,onSubmit:function(t){return e(t).catch((function(e){return Object(Zt.a)({},$t.a,e)}))},render:function(e){var t=e.handleSubmit,a=e.submitting,n=(e.form,e.submitError),i=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return r.a.createElement(zt.a,{onSubmit:t,error:!0},r.a.createElement(Ot.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),r.a.createElement(It.a,{name:"email",placeholder:"Email",component:Mt}),r.a.createElement(It.a,{name:"password",placeholder:"Password",type:"password",component:Mt}),n&&!c&&r.a.createElement(ta,{error:n,text:"Invalid username or password"}),r.a.createElement("br",null),r.a.createElement(p.a,{positive:!0,loading:a,type:"submit",content:"Login",fluid:!0,disabled:o||i}))}})})),ra=Object(Ht.combineValidators)({username:Object(Ht.isRequired)("username"),displayName:Object(Ht.isRequired)("displayName"),email:Object(Ht.isRequired)("email"),password:Object(Ht.isRequired)("password")}),ia=Object(d.a)((function(){var e=Object(n.useContext)(nt).userStore.register;return r.a.createElement(It.b,{validate:ra,onSubmit:function(t){return e(t).catch((function(e){return Object(Zt.a)({},$t.a,e)}))},render:function(e){var t=e.handleSubmit,a=e.submitting,n=(e.form,e.submitError),i=e.invalid,o=e.pristine,c=e.dirtySinceLastSubmit;return r.a.createElement(zt.a,{onSubmit:t,error:!0},r.a.createElement(Ot.a,{as:"h2",content:"Sign up to Reactivities",color:"teal",textAlign:"center"}),r.a.createElement(It.a,{name:"username",placeholder:"Username",component:Mt}),r.a.createElement(It.a,{name:"displayName",placeholder:"Display Name",component:Mt}),r.a.createElement(It.a,{name:"email",placeholder:"Email",component:Mt}),r.a.createElement(It.a,{name:"password",placeholder:"Password",type:"password",component:Mt}),n&&!c&&r.a.createElement(ta,{error:n,text:"Invalid username or password"}),r.a.createElement("br",null),r.a.createElement(p.a,{positive:!0,loading:a,type:"submit",content:"Register",fluid:!0,disabled:o||i}))}})})),oa=function(){var e=window.localStorage.getItem("jwt"),t=Object(n.useContext)(nt),a=t.userStore,i=a.isLoggedIn,o=a.user,c=t.modalStore.openModal;return r.a.createElement(bt.a,{inverted:!0,textAlign:"center",vertical:!0,className:"masthead"},r.a.createElement(m.a,{text:!0},r.a.createElement(Ot.a,{as:"h1",inverted:!0},r.a.createElement(f.a,{size:"massive",src:"/assets/logo.png",alt:"logo",style:{marginBottom:12}}),"Reactivities"),i&&o&&e?r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot.a,{as:"h2",inverted:!0,content:"Welcome back ".concat(o.displayName)}),r.a.createElement(p.a,{as:g.a,to:"/activities",size:"huge",inverted:!0},"Go to activities!")):r.a.createElement(r.a.Fragment,null,r.a.createElement(Ot.a,{as:"h2",inverted:!0,content:"Welcome to Reactivities"}),r.a.createElement(p.a,{onClick:function(){return c(r.a.createElement(na,null))},size:"huge",inverted:!0},"Login"),r.a.createElement(p.a,{onClick:function(){return c(r.a.createElement(ia,null))},size:"huge",inverted:!0},"Register"))))},ca=a(706),la=a(693),ua=a(711),sa=Object(d.a)((function(e){var t=e.profile,a=Object(n.useContext)(nt).profileStore,i=a.follow,o=a.unfollow,c=a.isCurrentUser,l=a.loading;return r.a.createElement(bt.a,null,r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:12},r.a.createElement(dt.a.Group,null,r.a.createElement(dt.a,null,r.a.createElement(dt.a.Image,{avatar:!0,size:"small",src:t.image||"/assets/user.png"}),r.a.createElement(dt.a.Content,{verticalAlign:"middle"},r.a.createElement(Ot.a,{as:"h1"}," ",t.displayName," "))))),r.a.createElement(ct.a.Column,{width:4},r.a.createElement(ca.a.Group,{widths:2},r.a.createElement(ca.a,{label:"Followers",value:t.followersCount}),r.a.createElement(ca.a,{label:"Following",value:t.followingCount})),r.a.createElement(la.a,null),!c&&r.a.createElement(ua.a,{animated:"move"},r.a.createElement(ua.a.Content,{visible:!0,style:{width:"100%"}},r.a.createElement(p.a,{fluid:!0,color:"teal",content:t.following?"Following":"Not following"})),r.a.createElement(ua.a.Content,{hidden:!0},r.a.createElement(p.a,{loading:l,fluid:!0,basic:!0,color:t.following?"red":"green",content:t.following?"Unfollow":"Follow",onClick:t.following?function(){return o(t.username)}:function(){return i(t.username)}}))))))})),ma=a(712),da=a(702),ba=[{menuItem:"Future Events",pane:{key:"futureEvents"}},{menuItem:"Past Events",pane:{key:"pastEvents"}},{menuItem:"Hosting",pane:{key:"hosted"}}],pa=Object(d.a)((function(){var e=Object(n.useContext)(nt).profileStore,t=e.loadUserActivities,a=e.profile,i=e.loadingActivities,o=e.userActivities;Object(n.useEffect)((function(){t(a.username)}),[t,a]);return r.a.createElement(ma.a.Pane,{loading:i},r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:16},r.a.createElement(Ot.a,{floated:"left",icon:"calendar",content:"Activities"})),r.a.createElement(ct.a.Column,{width:16},r.a.createElement(ma.a,{panes:ba,menu:{secondary:!0,pointing:!0},onTabChange:function(e,n){return function(e,n){var r;switch(n.activeIndex){case 1:r="past";break;case 2:r="hosting";break;default:r="future"}t(a.username,r)}(0,n)}}),r.a.createElement("br",null),r.a.createElement(da.a.Group,{itemsPerRow:4},o.map((function(e){return r.a.createElement(da.a,{as:g.a,to:"/activities/".concat(e.id),key:e.id},r.a.createElement(f.a,{src:"/assets/categoryImages/".concat(e.category,".jpg"),style:{minHeight:100,objectFit:"cover"}}),r.a.createElement(da.a.Content,null,r.a.createElement(da.a.Header,{textAlign:"center"},e.title),r.a.createElement(da.a.Meta,{textAlign:"center"},r.a.createElement("div",null,Object(ft.a)(new Date(e.date),"do LLL")),r.a.createElement("div",null,Object(ft.a)(new Date(e.date),"h:mm a")))))}))))))})),fa=a(379),ha={border:"dashed 3px",borderColor:"#eee",borderRadius:5,paddingTop:30,textAlign:"center",height:200},ga={borderColor:"green"},va=function(e){var t=e.setFiles,a=Object(n.useCallback)((function(e){t(e.map((function(e){return Object.assign(e,{preview:URL.createObjectURL(e)})})))}),[t]),i=Object(fa.a)({onDrop:a}),o=i.getRootProps,c=i.getInputProps,l=i.isDragActive;return r.a.createElement("div",Object.assign({},o(),{style:l?Object(tt.a)({},ha,{},ga):ha}),r.a.createElement("input",c()),r.a.createElement(pt.a,{name:"upload",size:"huge"}),r.a.createElement(Ot.a,{content:"Drop image here"}))},Ea=a(370),ya=a.n(Ea),ja=(a(647),function(e){var t=e.setImage,a=e.imagePreview,i=Object(n.useRef)(null);return r.a.createElement(ya.a,{ref:i,src:a,style:{height:200,width:"100%"},preview:".img-preview",aspectRatio:1,guides:!1,viewMode:1,dragMode:"move",scalable:!0,cropBoxMovable:!0,cropBoxResizable:!0,crop:function(){var e=i.current;e&&"undefined"===typeof e.getCroppedCanvas()||e&&e.getCroppedCanvas().toBlob((function(e){t(e)}),"image/jpeg")}})}),Oa=Object(d.a)((function(e){var t=e.uploadPhoto,a=e.loading,i=Object(n.useState)([]),o=Object(ot.a)(i,2),c=o[0],l=o[1],u=Object(n.useState)(null),s=Object(ot.a)(u,2),m=s[0],d=s[1];return Object(n.useEffect)((function(){c.forEach((function(e){return URL.revokeObjectURL(e.preview)}))}),[c]),r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:4},r.a.createElement(Ot.a,{color:"teal",sub:!0,content:"Step 1 - Add Photo"}),r.a.createElement(va,{setFiles:l})),r.a.createElement(ct.a.Column,{width:1}),r.a.createElement(ct.a.Column,{width:4},r.a.createElement(Ot.a,{sub:!0,color:"teal",content:"Step 2 - Resize image"}),!!c.length&&r.a.createElement(ja,{setImage:d,imagePreview:c[0].preview})),r.a.createElement(ct.a.Column,{width:1}),r.a.createElement(ct.a.Column,{width:4},r.a.createElement(Ot.a,{sub:!0,color:"teal",content:"Step 3 - Preview & Upload"}),!!c.length&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{style:{minHeight:200,overflow:"hidden"},className:"img-preview"}),r.a.createElement(p.a.Group,{width:2},r.a.createElement(p.a,{positive:!0,icon:"check",loading:a,disabled:!m,onClick:function(){return t(m)}}),r.a.createElement(p.a,{icon:"close",loading:a,onClick:function(){return l([])}})))))})),wa=Object(d.a)((function(){var e=Object(n.useContext)(nt).profileStore,t=e.profile,a=e.isCurrentUser,i=e.uploadPhoto,o=e.uploadingPhoto,c=e.setMainPhoto,l=e.loading,u=e.deletePhoto,s=Object(n.useState)(!0),m=Object(ot.a)(s,2),d=m[0],b=m[1],h=Object(n.useState)(void 0),g=Object(ot.a)(h,2),v=g[0],E=g[1],y=Object(n.useState)(void 0),j=Object(ot.a)(y,2),O=j[0],w=j[1];return r.a.createElement(ma.a.Pane,null,r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:16,style:{paddingBottom:0}},r.a.createElement(Ot.a,{floated:"left",icon:"image",content:"Photos"}),a&&r.a.createElement(p.a,{floated:"right",basic:!0,content:d?"Cancel":"Add Photo",onClick:function(){return b(!d)}})),r.a.createElement(ct.a.Column,{width:16},d?r.a.createElement(Oa,{uploadPhoto:function(e){i(e).then((function(){return b(!1)}))},loading:o}):r.a.createElement(da.a.Group,{itemsPerRow:5},t&&t.photos.map((function(e){return r.a.createElement(da.a,{key:e.id},r.a.createElement(f.a,{src:e.url}),a&&r.a.createElement(p.a.Group,{fluid:!0,width:2},r.a.createElement(p.a,{loading:l&&v===e.id,basic:!0,positive:!0,disabled:e.isMain,content:"Main",onClick:function(){E(e.id),c(e)}}),r.a.createElement(p.a,{loading:l&&O===e.id,basic:!0,negative:!0,disabled:e.isMain,icon:"trash",onClick:function(){w(e.id),u(e)}})))}))))))})),Ca=Object(Ht.combineValidators)({displayName:Object(Ht.isRequired)("displayName")}),Sa=Object(d.a)((function(e){var t=e.profile,a=e.updateProfile;return r.a.createElement(It.b,{validate:Ca,onSubmit:a,initialValues:t,render:function(e){var a=e.handleSubmit,n=e.submitting,i=e.invalid,o=e.pristine;return r.a.createElement(zt.a,{onSubmit:a,error:!0},r.a.createElement(Ot.a,{as:"h2",content:"Login to Reactivities",color:"teal",textAlign:"center"}),r.a.createElement(It.a,{name:"displayName",placeholder:"Display Name",component:Mt,value:t.displayName}),r.a.createElement(It.a,{name:"bio",value:t.bio,placeholder:"Bio",rows:3,component:Dt}),r.a.createElement(p.a,{positive:!0,loading:n,floated:"right",content:"Update profile",disabled:o||i}))}})})),xa=Object(d.a)((function(){var e=Object(n.useContext)(nt).profileStore,t=e.profile,a=e.isCurrentUser,i=e.updateProfile,o=Object(n.useState)(!0),c=Object(ot.a)(o,2),l=c[0],u=c[1];return r.a.createElement(ma.a.Pane,null,r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:16},r.a.createElement(Ot.a,{floated:"left",icon:"user",content:"About ".concat(t.username)}),a&&r.a.createElement(p.a,{floated:"right",basic:!0,content:l?"Cancel":"Edit Profile",onClick:function(){return u(!l)}})),r.a.createElement(ct.a.Column,{width:16},l?r.a.createElement(Sa,{updateProfile:i,profile:t}):r.a.createElement("span",null,t.bio))))})),ka=function(e){var t=e.profile;return r.a.createElement(da.a,{as:g.a,to:"/profile/".concat(t.username)},r.a.createElement(f.a,{src:t.image||"/assets/user.png"}),r.a.createElement(da.a.Content,null,r.a.createElement(da.a.Header,null,t.displayName)),r.a.createElement(da.a.Content,{extra:!0},r.a.createElement("div",null,r.a.createElement(pt.a,{name:"user"})," ",t.followersCount," Followers")))},Pa=Object(d.a)((function(){var e=Object(n.useContext)(nt).profileStore,t=e.profile,a=e.followings,i=e.loading,o=e.activeTab;return r.a.createElement(ma.a.Pane,{loading:i},r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:16},r.a.createElement(Ot.a,{floated:"left",icon:"user",content:3===o?"People following ".concat(t.displayName):"People ".concat(t.displayName," is following")})),r.a.createElement(ct.a.Column,{width:16},r.a.createElement(da.a.Group,{itemsPerRow:5},a.map((function(e){return r.a.createElement(ka,{key:e.username,profile:e})}))))))})),Aa=[{menuItem:"About",render:function(){return r.a.createElement(xa,null)}},{menuItem:"Photos",render:function(){return r.a.createElement(wa,null)}},{menuItem:"Activities",render:function(){return r.a.createElement(pa,null)}},{menuItem:"Followers",render:function(){return r.a.createElement(Pa,null)}},{menuItem:"Following",render:function(){return r.a.createElement(Pa,null)}}],za=function(e){var t=e.setActiveTab;return r.a.createElement(ma.a,{menu:{fluid:!0,vertical:!0},menuPosition:"right",panes:Aa,onTabChange:function(e,a){return t(a.activeIndex)}})},Ia=Object(d.a)((function(e){var t=e.match,a=Object(n.useContext)(nt).profileStore,i=a.profile,o=a.loadingProfile,c=a.loadProfile,l=a.setActiveTab;return Object(n.useEffect)((function(){c(t.params.username)}),[c,t]),o?r.a.createElement(Bt,{content:"Loading profile"}):r.a.createElement(ct.a,null,r.a.createElement(ct.a.Column,{width:16},r.a.createElement(sa,{profile:i}),r.a.createElement(za,{profile:i,setActiveTab:l})))})),Ra=function(){return r.a.createElement(bt.a,{placeholder:!0},r.a.createElement(Ot.a,{icon:!0},r.a.createElement(pt.a,{name:"search"}),"Oops - we've looked everywhere but couldn't find this."),r.a.createElement(bt.a.Inline,null,r.a.createElement(p.a,{as:g.a,to:"/activities",primary:!0},"Return to Activities page")))},Ma=a(696),Da=Object(d.a)((function(){var e=Object(n.useContext)(nt).modalStore,t=e.modal,a=t.open,i=t.body,o=e.closeModal;return r.a.createElement(Ma.a,{open:a,onClose:o,size:"mini"},r.a.createElement(Ma.a.Content,null,i))})),La=Object(d.a)((function(e){var t=e.component,a=Object(Pt.a)(e,["component"]),i=Object(n.useContext)(nt).userStore.isLoggedIn;return r.a.createElement(c.b,Object.assign({},a,{render:function(e){return i?r.a.createElement(t,e):r.a.createElement(c.a,{to:"/"})}}))})),Fa=Object(c.g)(Object(d.a)((function(e){var t=e.location,a=Object(n.useContext)(nt),i=a.commonStore,o=i.appLoaded,l=i.setAppLoaded,u=i.token,s=a.userStore.getUser;return Object(n.useEffect)((function(){u?s().finally((function(){return l()})):l()}),[s,l,u]),o?r.a.createElement(r.a.Fragment,null,r.a.createElement(Da,null),r.a.createElement(A.a,{position:"bottom-right"}),r.a.createElement(c.b,{exact:!0,path:"/",component:oa}),r.a.createElement(c.b,{exact:!0,path:"/(.+)",render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(it,null),r.a.createElement(m.a,{style:{marginTop:"7em"}},r.a.createElement(c.d,null,r.a.createElement(La,{exact:!0,path:"/activities",component:kt}),r.a.createElement(La,{path:"/activities/:id",component:Xt}),r.a.createElement(La,{key:t.key,path:["/createActivity","/manage/:id"],component:Gt}),r.a.createElement(La,{path:"/profile/:username",component:Ia}),r.a.createElement(c.b,{component:Ra}))))}})):r.a.createElement(Bt,{content:"Loading app..."})}))),Ta=(a(679),a(680),a(681),Object(l.a)());s()(),o.a.render(r.a.createElement(c.c,{history:Ta},r.a.createElement(Fa,null)),document.getElementById("root"))}},[[391,1,2]]]);
//# sourceMappingURL=main.eac4f4c4.chunk.js.map